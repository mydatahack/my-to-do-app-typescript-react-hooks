<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>IndexDb Test</title>
</head>
<body>
  <h1>Testing indexDb</h1>

<script>
if (!('indexedDB' in window)) {
  console.log('This browser doesn\'t support IndexedDB');
}

// (2) opening indexDb connection
const dbPromise = indexedDB.open('mtd', 1);

// if 
dbPromise.onsuccess = (e) => {
  const database = e.target.result
  const transaction = db.transaction('mtd-store', 'readwrite');
  const objectStore= tx.objectStore('mtd-store');
  const getData = objectStore.get('data')
  console.log(getData)

}




open = indexedDB.open('test');
open.onupgradeneeded = e => {
  open.result.createObjectStore('s');
};
open.onsuccess = e => {
  let db = open.result;
  let tx = db.transaction('s', 'readwrite');
  let s = tx.objectStore('s');
  let rq = s.put('value', 'key');
  rq.onsuccess = e => alert('succeeded');
  rq.onerror = e => alert(e.message);
  tx.oncomplete = e => alert('committed');
  tx.onabort = e => alert(e.message);
};
//   const checkIndexDb = async() => {
//     try {
//   let db = await
//     indexedDB.open('check');
//   let tx = db.transaction('NewObjectStore', 'readwrite');
//   let s = tx.objectStore('NewObjectStore');
//   await s.put('value', 'key');
//   alert('put ok');
//   await tx;
//   alert('committed');
// } catch (ex) {
//   alert(ex.message);
// }
//   }

//   checkIndexDb()

if (!('indexedDB' in window)) {
  console.log('This browser doesn\'t support IndexedDB');
}

// (2) opening indexDb connection
open = indexedDB.open('mtd');
open.onupgradeneeded = e => {
  open.result.createObjectStore('store');
};
open.onsuccess = e => {
  let db = e.target.result;
  let tx = db.transaction('store', 'readwrite');
  let s = tx.objectStore('store');
  let rq = s.put('key', {});
  rq.onsuccess = e => alert('succeeded');
  rq.onerror = e => alert(e.message);
  tx.oncomplete = e => alert('committed');
  tx.onabort = e => alert(e.message);
};
</script>
</body>
</html>